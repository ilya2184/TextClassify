# Определение статьи ДДС по назначению платежа

Сервис для определния статьи ДДС в поступлении на расчетный счет, списании с расчетного счета: по виду операции и назначению платежа

```
[POST] /train - form-data:
 file - File - Excel (xlsx) для обучения (например за предыдущий закрытый квартал) с колонкаим: ВидОперации, НазначениеПлатежа, СтатьяДвиженияДенежныхСредств
 model_id - Text - текстовый идентификатор модели. Например ИНН организации, подразделения, год (обычно статьи ДДС утверждаются ежегодно)
 [ANSWER] - JSON - с полем message (Model trained successfully)
[POST] /predict - form-data:
 model_id - Text - имя обученной ранее модели
 operataion - Text - вид операции. Например Оплата от покупателя, Прочее поступление, Оплата поставщику
 text - Text - назначение платежа
 [ANSWER] - JSON - с полем article (подходящий текст из колонки СтатьяДвиженияДенежныхСредств)
```

## Запуск
Построить имидж (однократно)
`docker build --tag textclassify .`

Запустить
`docker run --name article -p 5000:5000 textclassify`

Сохранить из 1С результат запроса в XLSX за закрытый период (месяц, квартал)
```
ВЫБРАТЬ
	ТабРеквизиты.ВидОперации КАК ВидОперации,
	ТабРеквизиты.НазначениеПлатежа КАК НазначениеПлатежа,
	ТабРеквизиты.СтатьяДвиженияДенежныхСредств КАК СтатьяДвиженияДенежныхСредств
ИЗ Документ.ПоступлениеНаРасчетныйСчет КАК ТабРеквизиты
ГДЕ ТабРеквизиты.Дата МЕЖДУ &ДатаНачала И &ДатаОкончания

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ТабРеквизиты.ВидОперации,
	ТабРеквизиты.НазначениеПлатежа,
	ТабРеквизиты.СтатьяДвиженияДенежныхСредств
ИЗ Документ.СписаниеСРасчетногоСчета КАК ТабРеквизиты
ГДЕ ТабРеквизиты.Дата МЕЖДУ &ДатаНачала И &ДатаОкончания
```

Обучить модель `/train`; Использовать и радоваться: `/predict`

Примеры из postman:
![image](https://github.com/ilya2184/TextClassify/assets/14931660/8a93ec21-f530-43df-aa5b-7fa0faf20768)
![image](https://github.com/ilya2184/TextClassify/assets/14931660/180340a6-035f-4896-b7e8-fc84ad98605e)

